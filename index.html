<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatFlow</title>
    <!-- Correct link for FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <style>
        /* Your existing styles here */
    </style>
</head>
<body>
    <div id="chat-container">
        <div id="message-container">
            <!-- Messages will be displayed here -->
        </div>
        <div id="chat-input">
            <input id="chat-message-input" type="text" placeholder="Type a message...">
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>

    <script>
        const messageContainer = document.getElementById('message-container');
        const inputField = document.getElementById('chat-message-input');
        let chatflowData = [];

        // Fetch the JSON data and assign it to the chatflowData variable
        fetch('chatflow.json')
            .then(response => response.json())
            .then(data => chatflowData = data)
            .catch(error => console.error('Error loading chatflow data:', error));

        // Function to send a message
        function sendMessage() {
            const message = inputField.value.trim();
            if (message) {
                displayMessage(message, 'user');
                getResponse(message);
                inputField.value = ''; // Clear input field
            }
        }

        // Function to display a message in the chat
        function displayMessage(message, type) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', type + '-message');
            const iconClass = type === 'user' ? 'fa-user' : 'fa-robot';
            messageDiv.innerHTML = `<i class="fas ${iconClass} message-icon"></i> ${message}`;
            messageContainer.appendChild(messageDiv);
            messageContainer.scrollTop = messageContainer.scrollHeight; // Scroll to the bottom
        }

        // Function to get a response from chatflowData
        function getResponse(userMessage) {
            const matchedResponse = chatflowData.find(item => 
                item.question.toLowerCase() === userMessage.toLowerCase());
            const response = matchedResponse ? matchedResponse.answer : 
                "I'm not sure how to answer that, but I'm learning every day!";
            setTimeout(() => displayMessage(response, 'chatflow'), 1000); // Simulate response delay
        }
    </script>
</body>
</html>
